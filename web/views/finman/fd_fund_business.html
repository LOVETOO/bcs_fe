<div local-storage ng-model="data.currItem" class="bill-form" ng-controller="ctrl_fd_fund_business">
    <div class="wrapper wrapper-content animated fadeInRight" ng-init="">
        <div class="row">
            <div class="ibox">
                <div class="ibox-title">
                    <h5>客户回款单</h5>
                    <div class="ibox-tools">
                        <form class="pull-right">
                            <button class="btn btn-white btn-sm" data-toggle="modal"
                                    ng-click="searchBySql()"><i class="fa fa-search"></i> 查询
                            </button>
                            <button class="btn btn-white btn-sm" data-toggle="modal" data-target="#attributeModal"
                                    ng-click="detail('','add')" title="新增客户回款单"><i class="fa fa-plus"></i> 新增
                            </button>
                            <button class="btn btn-white btn-sm" data-toggle="tooltip" data-placement="left" title="刷新"
                                    ng-click="searchData()"><i class="fa fa-refresh"></i>刷新
                            </button>
                        </form>
                    </div>
                </div>

                <div class="ibox-content">
                    <div id="headerGridView" slick-grid sg-options="headerOptions"
                         sg-columns="headerColumns"
                         class="slick-grid">
                    </div>
                    <div class="page_modal modal-open" page-pagination></div>
                </div>
            </div>
        </div>
    </div>

    <!--详情框-->
    <div class="modal inmodal fade" id="detailModal" role="dialog"
         aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-lg" >
            <div class="modal-content" style="width:840px;">
                <div class="modal-header" draggable-model>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span
                            class="sr-only">Close</span></button>
                    <h4 class="modal-title">客户回款单</h4>
                </div>
                <div class="modal-body">
                    <div class="ibox-content">
                        <form method="get" class="form-inline mline">
                            <div class="row">
                                <label class="control-label width_s">回款单号</label>
                                <input type="text" class="form-control" ng-model="data.currItem.ordinal_no"
                                       ng-readonly="true">
                                <label class="control-label width_s">客户编码</label>
                                <div class="input-group width_m">
                                    <input type="text" class="form-control  non-empty"  ng-readonly="data.currItem.syscreate_type==1"
                                           ng-model="data.currItem.customer_code" >
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" ng-disabled="data.currItem.syscreate_type==1"
                                            ng-click="customerSearch()">•••</button>
                                    </span>
                                </div>
                                <input type="text" class="form-control width_xm"
                                       ng-model="data.currItem.customer_name" ng-readonly="true"/>

                            </div>
                            <div class="row">
                                <label class="control-label width_s">分配编号</label>
                                <input type="text" class="form-control" ng-model="data.currItem.credence_no"
                                       ng-readonly="true">

                                <label class="control-label width_s">回款类型</label>
                                <select ng-model="data.currItem.return_type"  ng-disabled="data.currItem.syscreate_type==1"
                                    class="input-sm non-empty  form-control ng-pristine ng-untouched ng-valid localytics-chosen loading"
                                    ng-options="s.id as s.name for s in ReturnType">
                                </select>
                                <label class="control-label width_s">票据号</label>
                                <input type="text" class="form-control non-empty" ng-readonly="data.currItem.syscreate_type==1"
                                       ng-model="data.currItem.bill_no"
                                ><!--ng-readonly="data.currItem.return_type != 3"-->

                            </div>
                            <div class="row">
                                <label class="control-label width_s">回款金额</label>
                                <input type="text" class="form-control non-empty"  ng-readonly="data.currItem.syscreate_type==1"
                                       ng-model="data.currItem.amount_debit" money-format>
                                <label class="control-label width_s">已核销金额</label>
                                <input type="text" class="form-control" ng-model="data.currItem.amount_cancel_ivc"
                                  ng-readonly="true" money-format>
                                <label class="control-label width_s">回款日期</label>
                                <input type="text" class="form-control" ng-disabled="true"
                                       ng-model="data.currItem.date_fund" bs-date-picker/>
                            </div>
                            <!--<div class="row">
                                <label class="control-label width_s">付款类型</label>
                                <div class="input-group width_m">
                                    <input type="text" class="form-control  non-empty" ng-readonly="data.currItem.syscreate_type==1"
                                           ng-model="data.currItem.balance_type_name" >
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" ng-disabled="data.currItem.syscreate_type==1"
                                                ng-click="balanceTypeSearch()">•••</button>
                                    </span>
                                </div>
                                <label class="control-label width_s">来源单据类型</label>
                                <select ng-model="data.currItem.syscreate_type" ng-disabled="true"
                                        class="input-sm  form-control ng-pristine ng-untouched ng-valid localytics-chosen loading"
                                        ng-options="s.id as s.name for s in SyscreateType">
                                </select>
                            </div>-->
                            <div class="row">
                                <label class="control-label width_s">备注</label>
                                <textarea rows="2" style="width: 650px;"  ng-readonly="data.currItem.syscreate_type==1"
                                          class="form-control ng-pristine ng-untouched ng-valid"
                                          ng-model="data.currItem.note">
                                </textarea>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-hide="data.currItem.syscreate_type==1" ng-click="saveData()">保存</button>
                    <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
</div>

